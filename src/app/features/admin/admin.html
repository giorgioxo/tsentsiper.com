<div class="admin-container">
  <div class="admin-layout">
    <!-- Left Navigation -->
    <div class="left-nav">
      <div class="nav-buttons">
        <button class="nav-btn" [class.active]="mode === 'manage'" (click)="setMode('manage')">
          Edit or delete project
        </button>
        <button class="nav-btn" [class.active]="mode === 'add'" (click)="setMode('add')">
          Add new project
        </button>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">

      <div *ngIf="isLoading" class="loading">
        Loading projects...
      </div>

      <div class="projects-wrapper" *ngIf="!isLoading">
        <!-- Projects list with add section included -->
        <div class="projects-list" #itemsList>
          <!-- Add mode inline form - show first when in add mode -->
          <div *ngIf="mode === 'add'" class="project-item add-mode">
            <div class="project-actions">
              <div class="action-buttons">
                <button (click)="enterNewProject()" class="action-btn edit-btn">Enter new project</button>
                <button (click)="clearNewText()" class="action-btn delete-btn">Delete all text</button>
              </div>
            </div>
            <div class="project-description">
              <div class="project-number">{{ items.length + 1 }}</div>
              <textarea
                class="add-textarea"
                placeholder="Enter text..."
                [(ngModel)]="newProjectText"
              ></textarea>
            </div>
          </div>

          <!-- Existing projects -->
          <div *ngIf="items.length > 0">
        <div *ngFor="let item of items; let i = index" class="project-item">
          <!-- Action buttons - only show in manage mode -->
          <div class="project-actions" *ngIf="mode === 'manage'">
            <div *ngIf="editingIndex !== i" class="action-buttons">
              <button (click)="startEdit(i)" class="action-btn edit-btn">Edit project</button>
              <button (click)="removeItem(i)" class="action-btn delete-btn">Delete project</button>
            </div>
            
            <div *ngIf="editingIndex === i" class="edit-buttons">
              <button (click)="saveEdit()" class="action-btn replace-btn">Replace text with new one</button>
              <button (click)="cancelEdit()" class="action-btn cancel-btn">Cancel</button>
            </div>
          </div>

          <!-- Empty space for add mode to maintain layout -->
          <div class="project-actions" *ngIf="mode === 'add'">
            <div class="action-buttons">
              <!-- Empty space to maintain layout -->
            </div>
          </div>

          <!-- Project description with number inside -->
          <div class="project-description" 
               [class.editing]="editingIndex === i"
               [class.edit-mode]="editingIndex === i">
            <div class="project-number">{{ items.length - i }}</div>
            <div *ngIf="editingIndex !== i" class="description-text">{{ item }}</div>
            <textarea *ngIf="editingIndex === i" 
                      [(ngModel)]="editingItem" 
                      class="edit-textarea"
                      (keydown.enter)="saveEdit()"
                      (keydown.escape)="cancelEdit()"
                      #editInput></textarea>
          </div>
        </div>
        </div>

        <div *ngIf="items.length === 0 && mode !== 'add'" class="empty-state">
          No projects found.
        </div>
      </div>
    </div>
  </div>
</div>
